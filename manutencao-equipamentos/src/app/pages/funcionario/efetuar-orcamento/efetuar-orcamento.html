<!-- BACKDROP ESCURO -->
<div class="modal-backdrop" (click)="cancelar()"></div>

<!-- MODAL CENTRAL -->
<div class="modal-container">

  <div class="modal-content">

    <button class="close-btn" (click)="closeModal()">✖</button>

    <h1 class="title title-second">Efetuar Orçamento</h1>

    <div class="grid" *ngIf="dados; else loading">
      <!-- CARD 1 -->
      <div class="card bg">
        <h2 class="subtitle">Dados da Solicitação</h2>
        <div class="info-row"><strong>Codigo:</strong><br>{{ dados.solicitacao.id }}</div>
        <div class="info-row"><strong>Equipamento:</strong><br>{{ dados.solicitacao.equipamento }}</div>
        <div class="info-row"><strong>Categoria:</strong><br>{{ dados.solicitacao.categoria }}</div>
        <div class="info-row"><strong>Defeito:</strong><br>{{ dados.solicitacao.defeito }}</div>
        <div class="info-row"><strong>Criado em:</strong><br>{{ dados.solicitacao.criadoEm }}</div>
        <div class="info-row"><strong>Estado atual:</strong><br>{{ dados.solicitacao.estado }}</div>
      </div>

      <!-- CARD 2 -->
      <div class="card bg">
        <h2 class="subtitle">Dados do Cliente</h2>
        <div class="info-row"><strong>Nome:</strong><br>{{ dados.cliente.nome }}</div>
        <div class="info-row"><strong>Codigo:</strong><br>{{ dados.cliente.id }}</div>
        <div class="info-row"><strong>Email:</strong><br>{{ dados.cliente.email }}</div>
        <div class="info-row"><strong>Telefone:</strong><br>{{ dados.cliente.telefone }}</div>
      </div>
    </div>

    <ng-template #loading>
      <p style="text-align:center;">Carregando dados...</p>
    </ng-template>

    <!-- FORM -->
    <form class="form" (ngSubmit)="salvarOrcamento()">
      <div class="form-input-group">
        <label>Valor do Orçamento (R$)</label>
        <input type="number" step="0.01" min="0.01" [(ngModel)]="valorOrcamento" name="valorOrcamento" required />
      </div>

      <div class="form-input-group">
        <label>Observação (opcional)</label>
        <textarea rows="3" [(ngModel)]="observacao" name="observacao"></textarea>
      </div>

      <div class="actions">
        <button type="submit" class="btn btn-second">Salvar Orçamento</button>
        <a class="btn btn-primary" (click)="cancelar()">Cancelar</a>
      </div>
    </form>

  </div>
</div>
